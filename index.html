<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Llaveros de Banderas</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
  --azul: #2563eb;
  --verde: #16a34a;
  --fondo: #f1f5f9;
  --gris: #e5e7eb;
  --rojo: #ef4444;
  --amarillo: #facc15;
}

body {
  margin: 0;
  font-family: system-ui, sans-serif;
  background: var(--fondo);
  color: #111827;
}

header {
  background: linear-gradient(135deg, var(--azul), #60a5fa);
  color: white;
  text-align: center;
  padding: 30px 20px;
}

header img {
  width: 80%;
  max-width: 260px;
  border-radius: 14px;
  box-shadow: 0 10px 25px rgba(0,0,0,.3);
  margin-top: 15px;
}

h1 { margin: 0; font-size: 2rem; }
h2 { font-size: 1.6rem; margin-bottom: 15px; }
h3 { font-size: 1.2rem; margin: 5px 0; }

section {
  max-width: 1100px;
  margin: 40px auto;
  padding: 20px;
}

.productos {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 15px;
}

.card {
  background: white;
  border-radius: 14px;
  padding: 15px;
  text-align: center;
  box-shadow: 0 8px 20px rgba(0,0,0,.12);
  transition: transform 0.2s;
}

.card:hover {
  transform: translateY(-5px);
}

.precio {
  font-size: 1.2rem;
  font-weight: bold;
  color: var(--azul);
}

button {
  padding: 8px 14px;
  border: none;
  border-radius: 8px;
  background: var(--azul);
  color: white;
  cursor: pointer;
  margin-top: 10px;
  transition: background 0.2s;
}

button:hover {
  background: #1e40af;
}

#carrito-box {
  background: white;
  max-width: 500px;
  margin: 40px auto;
  padding: 20px;
  border-radius: 14px;
  box-shadow: 0 10px 25px rgba(0,0,0,.2);
}

.whatsapp {
  display: block;
  margin-top: 15px;
  text-align: center;
  font-weight: bold;
  color: var(--verde);
  text-decoration: none;
}

#btn-carrito {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: #111827;
  color: white;
  font-size: 26px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 10px 25px rgba(0,0,0,.35);
}

.personalizados-box {
  background: #fff;
  border-radius: 14px;
  padding: 20px;
  margin-top: 40px;
  box-shadow: 0 8px 20px rgba(0,0,0,.1);
  text-align: center;
}

.personalizados-box input[type="file"] {
  margin-top: 10px;
}

.personalizados-box p {
  margin-top: 10px;
  color: var(--rojo);
  font-weight: bold;
}

@media (max-width: 480px) {
  section { margin: 20px auto; padding: 10px; }
  .card { padding: 10px; }
  button { padding: 6px 10px; font-size: 0.9rem; }
  #btn-carrito { width: 50px; height: 50px; font-size: 22px; }
  h1 { font-size: 1.6rem; }
  h2 { font-size: 1.3rem; }
  h3 { font-size: 1rem; }
  #carrito-box { width: 90%; padding: 15px; margin: 20px auto; }
}

/* Animaciones */
@keyframes slideIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.card, .personalizados-box {
  animation: slideIn 0.5s ease forwards;
}

</style>
</head>

<body>

<header>
  <h1>Llaveros de Banderas</h1>
  <p>Venta en efectivo Â· Entrega personal</p>
  <img id="img-principal">
</header>

<section>
  <h2>Productos disponibles</h2>
  <div class="productos" id="productos"></div>
</section>

<section class="personalizados-box">
  <h2>Llaveros Personalizados</h2>
  <p>Sube tu diseÃ±o y lo producimos</p>
  <input type="file" id="img-personalizada">
  <p id="estado-personalizado">Llaveros impresos estÃ¡n en mantenimiento</p>
  <button id="enviar-personalizado">Enviar pedido personalizado</button>
</section>

<section id="zona-carrito">
  <div id="carrito-box">
    <h3>ðŸ›’ Carrito</h3>
    <ul id="lista-carrito"></ul>
    <p><strong>Total:</strong> $<span id="total">0</span></p>
    <button id="ordenar">ORDENAR</button>
    <a class="whatsapp" href="https://wa.me/59894038105" target="_blank">ðŸ“² Contactame</a>
  </div>
</section>

<div id="btn-carrito">ðŸ›’</div>

<script type="module">
import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'

const supabaseUrl = 'https://drabigponnfztvbdxsjc.supabase.co'
const supabaseKey = 'sb_publishable_gHdyPfSabCkNEblGZI8mWg_qMnr4IKb'
const supabase = createClient(supabaseUrl, supabaseKey)

// imagen principal
document.getElementById('img-principal').src = supabaseUrl + '/storage/v1/object/public/imagenes/banderas.jpg'

// Productos
const productosData = [
  { productos:'Canada', peso_gramos:3 },
  { productos:'Mexico', peso_gramos:5 },
  { productos:'Chile', peso_gramos:5 },
  { productos:'Estados Unidos', peso_gramos:5 },
  { productos:'Argentina', peso_gramos:5 },
  { productos:'Japon', peso_gramos:4 },
  { productos:'Ucrania', peso_gramos:4 },
  { productos:'Uruguay', peso_gramos:5 },
  { productos:'Paraguay', peso_gramos:4 },
  { productos:'Jamaica', peso_gramos:5 },
  { productos:'Brasil', peso_gramos:6 },
  { productos:'Suecia', peso_gramos:5 }
]

const preciosEspeciales = ['Uruguay','Argentina','Brasil']

const cont = document.getElementById('productos')
const carrito = []
const lista = document.getElementById('lista-carrito')
const totalSpan = document.getElementById('total')

function calcularPrecio(p) {
  if(preciosEspeciales.includes(p.productos)) return 100
  return 50
}

function renderCarrito(){
  lista.innerHTML=''
  let total=0
  carrito.forEach(p=>{
    const li=document.createElement('li')
    li.textContent=`${p.productos} - $${p.precio}`
    lista.appendChild(li)
    total+=p.precio
  })
  totalSpan.textContent=total
}

// Render productos
productosData.forEach(p=>{
  const precio = calcularPrecio(p)
  const card = document.createElement('div')
  card.className='card'
  card.innerHTML=`
    <h3>${p.productos}</h3>
    <p>Peso: ${p.peso_gramos} g</p>
    <p class="precio">$${precio}</p>
    <button>Agregar al carrito</button>
  `
  card.querySelector('button').onclick=()=>{
    carrito.push({...p, precio})
    renderCarrito()
  }
  cont.appendChild(card)
})

// Ordenar
document.getElementById('ordenar').onclick=()=>{
  if(carrito.length===0){
    alert('Carrito vacÃ­o')
    return
  }
  alert('Pedido registrado. Contactame por WhatsApp para coordinar pago en efectivo.')
  carrito.length=0
  renderCarrito()
}

// BotÃ³n carrito
document.getElementById('btn-carrito').onclick=()=>{
  document.getElementById('zona-carrito').scrollIntoView({behavior:'smooth'})
}

// Personalizados
document.getElementById('enviar-personalizado').onclick=()=>{
  const file = document.getElementById('img-personalizada').files[0]
  if(!file){
    alert('Selecciona una imagen')
    return
  }
  alert('Pedido personalizado registrado. Te contactaremos por WhatsApp.')
}
</script>

<script>
window.va = window.va || function(){(window.vaq = window.vaq || []).push(arguments);}
</script>
<script defer src="/_vercel/analytics/script.js"></script>

</body>
</html>
